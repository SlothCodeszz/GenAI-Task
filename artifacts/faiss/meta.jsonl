{"id": "requirements.txt::chunk0", "path": "requirements.txt", "ext": ".txt", "text": "annotated-doc==0.0.4\nannotated-types==0.7.0\nanyio==4.12.1\nattrs==25.4.0\nbackoff==2.2.1\nbcrypt==5.0.0\nbuild==1.4.0\ncertifi==2026.1.4\ncharset-normalizer==3.4.4\nchromadb==1.5.0\nclick==8.3.1\ncolorama==0.4.6\ndistro==1.9.0\ndurationpy==0.10\nfastapi==0.128.7\nfilelock==3.20.3\nflatbuffers==25.12.19\nfsspec==2026.2.0\ngoogleapis-common-protos==1.72.0\ngrpcio==1.78.0\nh11==0.16.0\nhf-xet==1.2.0\nhttpcore==1.0.9\nhttptools==0.7.1\nhttpx==0.28.1\nhuggingface_hub==1.4.1\nidna==3.11\nimportlib_metadata==8.7.1\nimportlib_resources==6.5.2\nJinja2==3.1.6\njoblib==1.5.3\njsonschema==4.26.0\njsonschema-specifications==2025.9.1\nkubernetes==35.0.0\nmarkdown-it-py==4.0.0\nMarkupSafe==3.0.3\nmdurl==0.1.2\nmmh3==5.2.0\nmpmath==1.3.0\nnetworkx==3.6.1\nnumpy==2.4.2\noauthlib==3.3.1\nollama==0.6.1\nonnxruntime==1.24.1\nopentelemetry-api==1.39.1\nopentelemetry-exporter-otlp-proto-common==1.39.1\nopentelemetry-exporter-otlp-proto-grpc==1.39.1\nopentelemetry-proto==1.39.1\nopentelemetry-sdk==1.39.1\nopentelemetry-semantic-conventions==0.60b1\norjson"}
{"id": "app/loaders.py::chunk0", "path": "app/loaders.py", "ext": ".py", "text": "from __future__ import annotations\nimport re \nfrom pathlib import Path\nfrom dataclasses import dataclass\nfrom typing import Iterable\nfrom app.settings import settings\n\n@dataclass(frozen=True)\nclass Chunk:\n    text: str\n    path: str\n    ext: str\n    chunk_id: str\n\ndef iter_code_files(root: Path) -> Iterable[Path]:\n    \"\"\"\n    Yield allowed code files under root, skipping ignored directories.\n    \"\"\"\n    root = root.resolve()\n    for p in root.rglob(\"*\"):\n        if p.is_dir():\n            continue\n\n        parts_lower = {part.lower() for part in p.parts}\n        if any(d.lower() in parts_lower for d in settings.ignore_dirs):\n            continue\n\n        if p.suffix.lower() not in settings.allowed_exts:\n            continue\n        \n        try:\n            if p.stat().st_size > settings.max_file_bytes:\n                continue\n        except OSError:\n            continue\n\n        yield p\n\ndef read_text(path: Path) -> str:\n    \"\"\"\n    Read the file as text with robust fallback.\n    \"\"\""}
{"id": "app/rag.py::chunk0", "path": "app/rag.py", "ext": ".py", "text": "from __future__ import annotations\nimport json\nimport time\nfrom pathlib import Path\nfrom typing import Any\nimport numpy as np\nimport ollama\nfrom app.settings import settings\nfrom app.loaders import Chunk\n\nINDEX_DIR = settings.faiss_dir\nINDEX_DIR.mkdir(parents=True, exist_ok=True)\n\nINDEX_PATH = INDEX_DIR / \"index.faiss\"\nMETA_PATH = INDEX_DIR / \"meta.jsonl\"\n\ndef embed_text(text: str) -> np.ndarray:\n    \"\"\"Return embedding vector as float32 numpy array.\"\"\"\n    resp = ollama.embeddings(model=settings.embed_model, prompt=text)\n    vec = np.array(resp[\"embedding\"], dtype=np.float32)\n    return vec\n\n\ndef _load_meta() -> list[dict[str, Any]]:\n    if not META_PATH.exists():\n        return []\n    items: list[dict[str, Any]] = []\n    with META_PATH.open(\"r\", encoding=\"utf-8\") as f:\n        for line in f:\n            items.append(json.loads(line))\n    return items\n\n\ndef _save_meta(items: list[dict[str, Any]]) -> None:\n    with META_PATH.open(\"w\", encoding=\"utf-8\") as f:\n        for it in items:"}
